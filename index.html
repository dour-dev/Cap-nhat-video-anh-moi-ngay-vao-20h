<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Video TikTok Fix</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  background:#000;
}

#feed{
  height:100vh;
  overflow-y:auto;
  scroll-snap-type:y mandatory;
}

.item{
  height:100vh;
  position:relative;
  scroll-snap-align:start;
}

video, img{
  width:100%;
  height:100%;
  object-fit:contain;
  background:#000;
}

/* nÃºt tiáº¿ng */
.sound-btn{
  position:absolute;
  right:15px;
  bottom:80px;
  background:rgba(0,0,0,.6);
  color:#fff;
  border:none;
  width:50px;
  height:50px;
  border-radius:50%;
  font-size:20px;
}
</style>
</head>
<body>

<div id="feed">

  <div class="item">
    <video 
      src="media/video1.mp4"
      muted
      playsinline
      loop
      preload="auto"
    ></video>
    <audio src="media/audio1.mp3" preload="auto"></audio>
    <button class="sound-btn">ðŸ”‡</button>
  </div>

  <div class="item">
    <video 
      src="aidex/[savetwt.com] ____________ SEALROOM - 2007634594439610689 - 1080x1920.mp4"
      muted
      playsinline
      loop
      preload="auto"
    ></video>
    <audio src="media/audio2.mp3" preload="auto"></audio>
    <button class="sound-btn">ðŸ”‡</button>
  </div>

</div>

<script>
const items = document.querySelectorAll('.item');

const observer = new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    const video = e.target.querySelector('video');
    const audio = e.target.querySelector('audio');

    if(!video) return;

    if(e.isIntersecting){
      video.currentTime = 0;
      video.play().catch(()=>{});
    }else{
      video.pause();
      audio.pause();
      audio.currentTime = 0;
    }
  });
},{threshold:0.8});

items.forEach(i=>observer.observe(i));

// báº­t táº¯t tiáº¿ng
document.querySelectorAll('.sound-btn').forEach(btn=>{
  btn.onclick = ()=>{
    const audio = btn.parentElement.querySelector('audio');
    if(audio.paused){
      audio.play();
      btn.textContent = 'ðŸ”Š';
    }else{
      audio.pause();
      btn.textContent = 'ðŸ”‡';
    }
  }
});
</script>

</body>
</html>
